(()=>{"use strict";class e{constructor(e){let{container:t=null,btns:s=null,next:i=null,prev:n=null,activeClass:l="",animate:a=!1,autoplay:r=!1}=e;this.container=document.querySelector(t);try{this.slides=this.container.children}catch(e){}this.btns=document.querySelectorAll(s),this.prev=document.querySelectorAll(n),this.next=document.querySelectorAll(i),this.slideIndex=1,this.activeClass=l,this.animate=a,this.autoplay=r}}class t extends e{constructor(e,t,s,i){super(e,t,s,i)}showSlides(e){e>this.slides.length&&(this.slideIndex=1),e<1&&(this.slideIndex=this.slides.length);try{this.hanson.style.opacity="0",3===e?setTimeout((()=>{this.hanson.style.opacity="1",this.hanson.classList.add("animated","slideInUp")}),3e3):this.hanson.classList.remove("animated","slideInUp")}catch(e){}Array.prototype.forEach.call(this.slides,(e=>{e.style.display="none",e.classList.remove("animated","fadeIn")})),this.slides[this.slideIndex-1].classList.add("animated","fadeIn"),this.slides[this.slideIndex-1].style.display="block"}changeSlides(e){this.showSlides(this.slideIndex+=e)}bindTriggers(){this.btns.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.changeSlides(1)})),e.parentNode.previousElementSibling.addEventListener("click",(e=>{e.preventDefault(),this.slideIndex=1,this.showSlides(this.slideIndex)}))})),this.prev.forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.changeSlides(-1)}))})),this.next.forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.changeSlides(1)}))}))}render(){if(this.container){try{this.hanson=document.querySelector(".hanson")}catch(e){}this.showSlides(this.slideIndex),this.bindTriggers()}}}class s extends e{constructor(e,t,s,i,n,l){super(e,t,s,i,n,l)}decorizeSlides(){Array.prototype.forEach.call(this.slides,(e=>{this.activeClass&&(e.classList.remove(this.activeClass),this.animate&&(e.querySelector(".card__controls-arrow").style.opacity="0",e.querySelector(".card__title").style.opacity="0.4"))})),this.activeClass&&"BUTTON"!==this.slides[0].tagName&&(this.slides[0].classList.add(this.activeClass),this.animate&&(this.slides[0].querySelector(".card__controls-arrow").style.opacity="1",this.slides[0].querySelector(".card__title").style.opacity="1"))}nextSlide(){"BUTTON"==this.slides[1].tagName&&"BUTTON"==this.slides[2].tagName?(this.container.appendChild(this.slides[0]),this.container.appendChild(this.slides[1]),this.container.appendChild(this.slides[2]),this.decorizeSlides()):"BUTTON"==this.slides[1].tagName?(this.container.appendChild(this.slides[0]),this.container.appendChild(this.slides[1]),this.decorizeSlides()):(this.container.appendChild(this.slides[0]),this.decorizeSlides())}bindTriggers(){this.prev.forEach((e=>{e.addEventListener("click",(()=>{for(let e=this.slides.length-1;e>0;e--)if("BUTTON"!==this.slides[e].tagName){let t=this.slides[e];this.container.insertBefore(t,this.slides[0]),this.decorizeSlides();break}}))})),this.next.forEach((e=>{e.addEventListener("click",(()=>this.nextSlide()))}))}bindAutoplayStop(e){e.addEventListener("mouseenter",(()=>{clearInterval(this.paused)})),e.addEventListener("mouseleave",(()=>{this.paused=setInterval((()=>this.nextSlide()),3e3)}))}init(){try{this.container.style.cssText="\n            display: flex;\n            flex-wrap: wrap;\n            align-items: flex-end;\n            overflow: hidden;\n            ",this.bindTriggers(),this.decorizeSlides(),this.autoplay&&(this.paused=setInterval((()=>this.nextSlide()),3e3),this.bindAutoplayStop(this.prev[0]),this.bindAutoplayStop(this.next[0]),this.bindAutoplayStop(this.container))}catch(e){}}}class i{constructor(e,t){this.btns=document.querySelectorAll(e),this.overlay=document.querySelector(t),this.close=this.overlay.querySelector(".close"),this.onPlayerStateChange=this.onPlayerStateChange.bind(this)}bindTriggers(){this.btns.forEach(((e,t)=>{try{const s=e.closest(".module__video-item").nextElementSibling;t%2==0&&s.setAttribute("data-disabled","true")}catch(e){}e.addEventListener("click",(()=>{e.closest(".module__video-item")&&"true"===e.closest(".module__video-item").getAttribute("data-disabled")||(this.activeBtn=e,document.querySelector("iframe#frame")?(this.path!==e.getAttribute("data-url")&&(this.path=e.getAttribute("data-url"),this.player.loadVideoById({videoId:this.path})),this.overlay.style.display="flex"):(this.path=e.getAttribute("data-url"),this.createPlayer(this.path)))}))}))}bindCloseBtn(){this.close.addEventListener("click",(()=>{this.player.stopVideo(),this.overlay.style.display="none"}))}createPlayer(e){this.player=new YT.Player("frame",{height:"100%",width:"100%",videoId:`${e}`,events:{onStateChange:this.onPlayerStateChange}}),this.overlay.classList.add("animated","fadeIn"),this.overlay.style.display="flex"}onPlayerStateChange(e){const t=this.activeBtn.closest(".module__video-item").nextElementSibling,s=this.activeBtn.querySelector("svg").cloneNode(!0);0==e.data&&t.querySelector(".play__circle").classList.contains("closed")&&(t.querySelector(".play__circle").classList.remove("closed"),t.querySelector("svg").remove(),t.querySelector(".play__circle").appendChild(s),t.querySelector(".play__text").textContent="play video",t.querySelector(".play__text").classList.remove("attention"),t.style.opacity=1,t.style.filter="none",t.setAttribute("data-disabled","false"))}init(){if(this.btns.length>0){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.bindTriggers(),this.bindCloseBtn()}}}class n{constructor(e,t,s){try{this.oldOfficer=document.querySelector(e),this.newOfficer=document.querySelector(t),this.oldItems=this.oldOfficer.querySelectorAll(s),this.newItems=this.newOfficer.querySelectorAll(s),this.oldCounter=0,this.newCounter=0}catch(e){}}hideItems(e){e.forEach(((e,t,s)=>{t!==s.length-1&&(e.style.display="none")}))}bindTriggers(e,t,s){s.forEach((e=>{e.classList.add("animated","fadeInLeft")})),e.querySelector(".plus").addEventListener("click",(()=>{t!==s.length-2?(s[t].style.display="flex",t++):(s[t].style.display="flex",s[s.length-1].remove())}))}init(){try{this.hideItems(this.oldItems),this.hideItems(this.newItems),this.bindTriggers(this.oldOfficer,this.oldCounter,this.oldItems),this.bindTriggers(this.newOfficer,this.newCounter,this.newItems)}catch(e){}}}class l{constructor(e){this.forms=document.querySelectorAll(e),this.inputs=document.querySelectorAll("input"),this.selects=document.querySelectorAll("select"),this.message={loading:"Пожалуйста, подождите. Идёт загрузка...",success:"Спасибо! Мы с Вами свяжемся.",failure:"Что-то пошло не так...",spinner:"assets/img/spinner.gif",ok:"assets/img/ok.png",fail:"assets/img/fail.png"},this.path="./assets/question.php"}async postData(e,t){let s=await fetch(e,{method:"POST",body:t});return await s.text()}clearForms=()=>{this.inputs.forEach((e=>{e.value=""})),this.selects.forEach((e=>{e.value=""}))};checkMailInputs(){document.querySelectorAll('[type="email"]').forEach((e=>{e.addEventListener("keypress",(function(e){e.key.match(/[^a-z 0-9 @ \.]/gi)&&e.preventDefault()}))}))}initMask(){function e(e){let t="+1 (___) ___-____",s=0,i=t.replace(/\D/g,""),n=this.value.replace(/\D/g,"");i.length>=n.length&&(n=i),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&s<n.length?n.charAt(s++):s>=n.length?"":e})),"blur"===e.type?2==this.value.length&&(this.value=""):((e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let s=t.createTextRange();s.collapse(!0),s.moveEnd("character",e),s.moveStart("character",e),s.select()}})(this.value.length,this)}document.querySelectorAll('[name="phone"]').forEach((t=>{t.addEventListener("input",e),t.addEventListener("focus",e),t.addEventListener("blur",e)}))}init(){this.checkMailInputs(),this.initMask(),this.forms.forEach((e=>{e.addEventListener("submit",(t=>{t.preventDefault();const s=document.createElement("div");s.style.cssText="\n                    margin-top: 15px;\n                    font-size: 18px;\n                    color: grey;\n                ",s.textContent=this.message.loading,e.parentNode.appendChild(s);const i=new FormData(e);this.postData(this.path,i).then((e=>{console.log(e),s.textContent=this.message.success})).catch((()=>{s.textContent=this.message.failure})).finally((()=>{this.clearForms(),setTimeout((()=>{s.remove()}),6e3)}))}))}))}}class a{constructor(e){this.btns=document.querySelectorAll(e)}init(){this.btns.length>=1&&this.btns.forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".module__info-show").nextElementSibling;t.classList.toggle("msg"),t.style.marginTop="20px"}))}))}}class r{constructor(e){this.btns=document.querySelectorAll(e),this.path="assets/img/mainbg.jpg"}downloadImage(e){const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","nice_picture"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}init(){this.btns.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.downloadImage(this.path)}))}))}}window.addEventListener("DOMContentLoaded",(()=>{new t({container:".page",btns:".next"}).render(),new t({container:".moduleapp",btns:".next",prev:".prevmodule",next:".nextmodule"}).render(),new s({container:".showup__content-slider",prev:".showup__prev",next:".showup__next",activeClass:"card-active",animate:!0}).init(),new s({container:".modules__content-slider",prev:".slick-prev",next:".slick-next",activeClass:"card-active",animate:!0,autoplay:!0}).init(),new s({container:".feed__slider",prev:".feed__slider .slick-prev",next:".feed__slider .slick-next",activeClass:"feed__item-active"}).init(),new i(".play",".overlay").init(),new i(".module__video-item .play",".overlay").init(),new n(".officerold",".officernew",".officer__card-item").init(),new l("form").init(),new a(".plus").init(),new r(".download").init()}))})();